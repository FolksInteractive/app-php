{% extends 'TCCoreBundle:Vendor:skeleton.html.twig' %}

{% use "TCCoreBundle:Relation:progress.html.twig" with body_class as base_body_class %}

{% use "TCCoreBundle:Vendor:Relation/menu.html.twig" %}

{% block body_class %} {{parent()}} {{ block('base_body_class') }}  {% endblock %}

{% block main_before %} 
{% set attr = {'name':form.vars.name} %}
{% set attr = attr|merge({'ng-app':''}) %}
{% set attr = attr|merge({'novalidate':""}) %}   
{{form_start(form, {'attr':attr})}}
{% endblock %}

{% block main_after %}
{{form_widget(form._token)}}
{{form_end(form, {"render_rest":false})}}
{% endblock %}

{% block toolbar %}
<div class="tc-breadcrumb pull-left">
        {% set menu = knp_menu_get('TCCoreBundle:VendorMenuBuilder:progressMenu',[],{"relation": relation}) %}

        {{ knp_menu_render(menu, {'template': 'TCCoreBundle::breadcrumbs.html.twig'}) }}
    </div>

    <div class="tc-controls pull-right">
        {% set attr = {'class':'btn-lg'} %}
        {% set attr = attr|merge({'ng-disabled':"!"~ form.vars.name ~ ".$dirty"}) %}   
        {% set attr = attr|merge({'disabled':""}) %}   
        {% set attr = attr|merge({'ng-class': form.vars.name ~ ".$dirty && 'btn-primary'"}) %}   
        {{form_widget(form.submit, {'attr':attr})}}
        </div>
{% endblock %}

{% block sheet %}

        <div class="tc-progress-section">

            <table class="table tc-table">

                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th>Work Progression</th>
                        <th>Due Date</th>
                    </tr>
                </thead>

                <tbody>
                    <!--{% for order in relation.getOrdersTodo() %}
        {% for deliverable in order.getDeliverablesTodo() %}
            {% set ngModel = 'deliverable_'~ deliverable.id %}
                        <tr class="work" 
                            ng-init="{{ngModel}}.completed=false"
                            ng-class="{{ngModel}}.completed && 'work-completed' || 'work-in-progress'">
                            <td class="check">
                    {{form_widget(form.deliverables[deliverable.id], {'attr':{'ng-model':ngModel~'.completed'}})}}
                            </td>
                            <td class="description">
                    {{deliverable.name}}
                            </td>
                            <td class="cost">
                                $ {{deliverable.cost|number_format(2, '.', ',')}}
                            </td>
                            <td class="quantity">
                    {{deliverable.quantity}}
                            </td>
                            <td class="subtotal">
                                $ {{deliverable.cost|number_format(2, '.', ',')}}
                            </td>
                        </tr>     
        {% endfor %}
        {% endfor %}-->
                    <tr>
                        <td class="tc-actions-col">
                            <div class="checkbox-item">
                                <input type="checkbox" value="None" id="checkbox-item1" name="check" />
                                <label for="checkbox-item1"></label>
                            </div>
                        </td>
                        <td class="tc-description-col">
                            <div class="title"><a href="#">Anti-Corruption's course</a></div>
                            <div class="main-description">Export of 16 e-Learning Courses</div>
                            <div class="sub-description"><b>Purchased</b> on September 15th 2013</div>
                        </td>
                        <td class="tc-progress-col">
                            <div class="progress progress-striped">
                                <div class="progress-bar" role="progressbar" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" style="width: 30%;">
                                    <div class="progress-label">$ 12.75</div>
                                </div>
                                <div class="total-value">$42.50</div>
                            </div>
                        </td>
                        <td class="tc-date-col tc-info-col">2014-01-01</td>
                    </tr>
                    <tr>
                        <td class="tc-actions-col">
                            <div class="checkbox-item">
                                <input type="checkbox" value="None" id="checkbox-item2" name="check" />
                                <label for="checkbox-item2"></label>
                            </div>
                        </td>
                        <td class="tc-description-col">
                            <div class="title"><a href="#">Code d’éthique et de conduite en affaires 2013</a></div>
                            <div class="main-description">Export of 16 e-Learning Courses</div>
                            <div class="sub-description"><b>Purchased</b> on September 15th 2013</div>
                        </td>
                        <td class="tc-progress-col">
                            <div class="progress progress-striped">
                                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%;">
                                    <div class="progress-label">$ 42.50</div>
                                </div>
                                <div class="total-value">$42.50</div>
                            </div>

                        </td>
                        <td class="tc-date-col tc-info-col">2014-01-01</td>
                    </tr>
                    <tr>
                        <td class="tc-actions-col">
                            <div class="checkbox-item">
                                <input type="checkbox" value="None" id="checkbox-item3" name="check" />
                                <label for="checkbox-item3"></label>
                            </div>
                        </td>
                        <td class="tc-description-col">
                            <div class="title"><a href="#">Code of Business Conduct & Ethics 2013</a></div>
                            <div class="main-description">Export of 16 e-Learning Courses</div>
                            <div class="sub-description"><b>Purchased</b> on September 15th 2013</div>
                        </td>
                        <td class="tc-progress-col">
                            <div class="progress progress-striped">
                                <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                                <div class="total-value">$42.50</div>
                            </div>
                        </td>
                        <td class="tc-date-col tc-info-col">2014-01-01</td>
                    </tr>
                </tbody>
            </table>
        </div> 
{% endblock %}
