{% extends 'TCCoreBundle::skeleton_client.html.twig' %}

{% block body_class %} {{parent()}} relation-rfps  {% endblock %}

{% use "TCCoreBundle:Relation:relation_menu_vendor.html.twig" %}

{% block toolbar %}
<div class="tc-breadcrumb pull-left">
        {% set menu = knp_menu_get('TCCoreBundle:VendorMenuBuilder:rfpsMenu',[],{"relation": relation}) %}
        {{ knp_menu_render(menu, {'template': 'TCCoreBundle::breadcrumbs.html.twig'}) }}
    </div>

    <div class="tc-controls pull-right"></div>

{% endblock %}

{% block sheet %}

{% if rfps is empty %}
    {{block('empty_rfps_vendor')}}

{% else %}
<div class="tc-rfps-section">      
    <table class="tc-table table">
        <thead>
            <tr>
                <th class="hide"></th>
                <th class="left temporary-space">Description</th>
                <th>Discussion</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for rfp in rfps %}
                    <tr>
                        <td class="tc-actions-col hide"><!-- Enlever aussi le .temporary-space en mÃªme temps que le .hide -->
                            <div class="checkbox-item">
                                <input type="checkbox" value="None" id="checkbox-item1" name="check" />
                                <label for="checkbox-item1"></label>
                            </div>
                        </td>
                        <td class="tc-description-col temporary-space">
                            <div class="title">
                                <a href="{{path("vendor_rfp_show",{'idRFP':rfp.id,'idRelation':relation.id})}}">
                            {{rfp.heading|default('rfp')}}
                                    </a>
                                </div>
                                <div class="main-description"><b>Created</b> on September 16th 2013</div>
                                <div class="sub-description hide"><b>Approved</b> on September 16th 2013 </div>
                                </div>
                        </td>
                        <td class="tc-discussion-col">
                            <a href="{{path("vendor_rfp_show",{'idRFP':rfp.id,'idRelation':relation.id})}}"><div class="badge-talk-bubble">
                            {{rfp.thread.getNumComments()}}
                            </div></a>
                        </td>
                        <td class="tc-status tc-status-col">
                            <ul>
                                <!-- Si c'est en draft ou sent, ajouter la classe .inprocess -->
                                <li><a href="{{path("vendor_rfp_show",{'idRFP':rfp.id,'idRelation':relation.id})}}">Draft</a></li>
                                <li><a href="{{path("vendor_rfp_show",{'idRFP':rfp.id,'idRelation':relation.id})}}">Sent</a></li>
                                {% if rfp.order is not null %}
                                <!-- Si c'est approuver utiliser la classe .active sinon, .declined -->
                                <li><a href="{{path("vendor_order_show",{'idOrder':rfp.order.id,'idRelation':relation.id})}}" class="active">Proposed</a></li>
                                {% else %}
                                <li><a href="#">Proposed</a></li>
                                {% endif %}
                            </ul>
                        </td>
                    </tr>    
            {% endfor %}
                        </tbody>
                    </table>
                </div> 
{% endif %}
{% endblock %}
